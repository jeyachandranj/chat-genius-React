{"ast":null,"code":"import _taggedTemplateLiteral from \"D:\\\\chat-genius-main\\\\public\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/taggedTemplateLiteral\";\nimport _regeneratorRuntime from \"D:\\\\chat-genius-main\\\\public\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";\nimport _asyncToGenerator from \"D:\\\\chat-genius-main\\\\public\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"D:\\\\chat-genius-main\\\\public\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\n\nvar _jsxFileName = \"D:\\\\chat-genius-main\\\\public\\\\src\\\\pages\\\\Chat.jsx\",\n    _templateObject;\n\nimport React, { useEffect, useState, useRef } from \"react\";\nimport axios from \"axios\";\nimport { useNavigate } from \"react-router-dom\";\nimport { io } from \"socket.io-client\";\nimport styled from \"styled-components\";\nimport { allUsersRoute, host } from \"../utils/APIRoutes\";\nimport ChatContainer from \"../components/ChatContainer\";\nimport Contacts from \"../components/Contacts\";\nimport Welcome from \"../components/Welcome\";\nexport default function Chat() {\n  var navigate = useNavigate();\n  var socket = useRef();\n\n  var _useState = useState([]),\n      _useState2 = _slicedToArray(_useState, 2),\n      contacts = _useState2[0],\n      setContacts = _useState2[1];\n\n  var _useState3 = useState(undefined),\n      _useState4 = _slicedToArray(_useState3, 2),\n      currentChat = _useState4[0],\n      setCurrentChat = _useState4[1];\n\n  var _useState5 = useState(undefined),\n      _useState6 = _slicedToArray(_useState5, 2),\n      currentUser = _useState6[0],\n      setCurrentUser = _useState6[1];\n\n  useEffect( /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) switch (_context.prev = _context.next) {\n        case 0:\n          if (localStorage.getItem(process.env.REACT_APP_LOCALHOST_KEY)) {\n            _context.next = 4;\n            break;\n          }\n\n          navigate(\"/login\");\n          _context.next = 9;\n          break;\n\n        case 4:\n          _context.t0 = setCurrentUser;\n          _context.next = 7;\n          return JSON.parse(localStorage.getItem(process.env.REACT_APP_LOCALHOST_KEY));\n\n        case 7:\n          _context.t1 = _context.sent;\n          (0, _context.t0)(_context.t1);\n\n        case 9:\n        case \"end\":\n          return _context.stop();\n      }\n    }, _callee);\n  })), []);\n  useEffect(function () {\n    if (currentUser) {\n      socket.current = io(host);\n      socket.current.emit(\"add-user\", currentUser._id);\n    }\n  }, [currentUser]);\n  useEffect( /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n    var data;\n    return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n      while (1) switch (_context2.prev = _context2.next) {\n        case 0:\n          if (!currentUser) {\n            _context2.next = 9;\n            break;\n          }\n\n          if (!currentUser.isAvatarImageSet) {\n            _context2.next = 8;\n            break;\n          }\n\n          _context2.next = 4;\n          return axios.get(\"\".concat(allUsersRoute, \"/\").concat(currentUser._id));\n\n        case 4:\n          data = _context2.sent;\n          setContacts(data.data);\n          _context2.next = 9;\n          break;\n\n        case 8:\n          navigate(\"/setAvatar\");\n\n        case 9:\n        case \"end\":\n          return _context2.stop();\n      }\n    }, _callee2);\n  })), [currentUser]);\n\n  var handleChatChange = function handleChatChange(chat) {\n    setCurrentChat(chat);\n  };\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Container, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Contacts, {\n    contacts: contacts,\n    changeChat: handleChatChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 11\n    }\n  }), currentChat === undefined ? /*#__PURE__*/React.createElement(Welcome, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 13\n    }\n  }) : /*#__PURE__*/React.createElement(ChatContainer, {\n    currentChat: currentChat,\n    socket: socket,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 13\n    }\n  }))));\n}\nvar Container = styled.div(_templateObject || (_templateObject = _taggedTemplateLiteral([\"\\n  height: 100vh;\\n  width: 100vw;\\n  display: flex;\\n  flex-direction: column;\\n  justify-content: center;\\n  gap: 1rem;\\n  align-items: center;\\n  background-color: #131324;\\n  .container {\\n    height: 85vh;\\n    width: 85vw;\\n    background-color: #00000076;\\n    display: grid;\\n    grid-template-columns: 25% 75%;\\n    @media screen and (min-width: 720px) and (max-width: 1080px) {\\n      grid-template-columns: 35% 65%;\\n    }\\n  }\\n\"])));","map":{"version":3,"sources":["D:/chat-genius-main/public/src/pages/Chat.jsx"],"names":["React","useEffect","useState","useRef","axios","useNavigate","io","styled","allUsersRoute","host","ChatContainer","Contacts","Welcome","Chat","navigate","socket","contacts","setContacts","undefined","currentChat","setCurrentChat","currentUser","setCurrentUser","localStorage","getItem","process","env","REACT_APP_LOCALHOST_KEY","JSON","parse","current","emit","_id","isAvatarImageSet","get","data","handleChatChange","chat","Container","div"],"mappings":"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","sourcesContent":["import React, { useEffect, useState, useRef } from \"react\";\nimport axios from \"axios\";\nimport { useNavigate } from \"react-router-dom\";\nimport { io } from \"socket.io-client\";\nimport styled from \"styled-components\";\nimport { allUsersRoute, host } from \"../utils/APIRoutes\";\nimport ChatContainer from \"../components/ChatContainer\";\nimport Contacts from \"../components/Contacts\";\nimport Welcome from \"../components/Welcome\";\n\nexport default function Chat() {\n  const navigate = useNavigate();\n  const socket = useRef();\n  const [contacts, setContacts] = useState([]);\n  const [currentChat, setCurrentChat] = useState(undefined);\n  const [currentUser, setCurrentUser] = useState(undefined);\n  useEffect(async () => {\n    if (!localStorage.getItem(process.env.REACT_APP_LOCALHOST_KEY)) {\n      navigate(\"/login\");\n    } else {\n      setCurrentUser(\n        await JSON.parse(\n          localStorage.getItem(process.env.REACT_APP_LOCALHOST_KEY)\n        )\n      );\n    }\n  }, []);\n  useEffect(() => {\n    if (currentUser) {\n      socket.current = io(host);\n      socket.current.emit(\"add-user\", currentUser._id);\n    }\n  }, [currentUser]);\n\n  useEffect(async () => {\n    if (currentUser) {\n      if (currentUser.isAvatarImageSet) {\n        const data = await axios.get(`${allUsersRoute}/${currentUser._id}`);\n        setContacts(data.data);\n      } else {\n        navigate(\"/setAvatar\");\n      }\n    }\n  }, [currentUser]);\n  const handleChatChange = (chat) => {\n    setCurrentChat(chat);\n  };\n  return (\n    <>\n      <Container>\n        <div className=\"container\">\n          <Contacts contacts={contacts} changeChat={handleChatChange} />\n          {currentChat === undefined ? (\n            <Welcome />\n          ) : (\n            <ChatContainer currentChat={currentChat} socket={socket} />\n          )}\n        </div>\n      </Container>\n    </>\n  );\n}\n\nconst Container = styled.div`\n  height: 100vh;\n  width: 100vw;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  gap: 1rem;\n  align-items: center;\n  background-color: #131324;\n  .container {\n    height: 85vh;\n    width: 85vw;\n    background-color: #00000076;\n    display: grid;\n    grid-template-columns: 25% 75%;\n    @media screen and (min-width: 720px) and (max-width: 1080px) {\n      grid-template-columns: 35% 65%;\n    }\n  }\n`;\n"]},"metadata":{},"sourceType":"module"}